
if CPPUNIT_PRESENT
SUBDIRS = . test
else
SUBDIRS = 
endif

if QT4_PRESENT
QTSQL_DRV_H = QtSqlDriver.h
QTSQL_DRV_CPP = QtSqlDriver.cpp
else
QTSQL_DRV_H =
QTSQL_DRV_CPP =
endif

if ODBC_PRESENT
ODBC_DRV_H = OdbcDriver.h tiodbc.hpp
ODBC_DRV_CPP = OdbcDriver.cpp tiodbc.cpp
else
ODBC_DRV_H =
ODBC_DRV_CPP =
endif

if SQLITE3_PRESENT
SQLITE3_DRV_H = SQLiteDriver.h
SQLITE3_DRV_CPP = SQLiteDriver.cpp
else
SQLITE3_DRV_H =
SQLITE3_DRV_CPP =
endif

if SOCI_PRESENT
SOCI_DRV_H = SOCIDriver.h
SOCI_DRV_CPP = SOCIDriver.cpp
else
SOCI_DRV_H =
SOCI_DRV_CPP =
endif

libyborm_la_SOURCES = \
	$(CPP_FILES) $(QTSQL_DRV_CPP) $(ODBC_DRV_CPP) $(SQLITE3_DRV_CPP) $(SOCI_DRV_CPP)

AM_CXXFLAGS = \
	-I $(top_srcdir)/include/yb \
	-I $(top_srcdir)/lib/yb/orm \
	$(XML_CPPFLAGS) \
	$(BOOST_CPPFLAGS) \
	$(SQLITE3_CFLAGS) \
	$(SOCI_CXXFLAGS) \
	$(WX_CFLAGS) \
	$(QT_CFLAGS)

CPP_FILES = \
	Expression.cpp \
	MetaData.cpp \
	Engine.cpp \
	SqlDriver.cpp \
	SqlPool.cpp \
	MetaDataConfig.cpp \
	XMLizer.cpp \
	DomainFactory.cpp \
	DataObject.cpp \
	DomainObject.cpp \
	CodeGen.cpp

lib_LTLIBRARIES = libyborm.la

libyborm_la_LDFLAGS = -version-info 0:0:0

libyborm_la_LIBADD = \
	$(top_builddir)/lib/util/libybutil.la \
	$(XML_LIBS) \
	$(BOOST_LDFLAGS) \
	$(BOOST_LIBS_R) \
	$(ODBC_LIBS) \
	$(SQLITE3_LIBS) \
	$(SOCI_LIBS) \
	$(WX_LIBS) \
	$(QT_LDFLAGS) \
	$(QT_LIBS)

